hostname router2
!! IOS XR Configuration version = 6.5.3
!
interface Loopback0
 ipv4 address 2.2.2.2 255.255.255.255
 ipv6 address 3001:2::2/64
 no shutdown
!
interface GigabitEthernet0/0/0/0
 description To Router1
 ip address 10.12.0.2/24
 ipv6 address 3001:12::2/64
 no shutdown
!
interface GigabitEthernet0/0/0/1
 description To Router4
 ip address 10.24.0.2/24
 ipv6 address 3001:24::2/64
 no shutdown
!
interface GigabitEthernet0/0/0/8
 description To ExaBGP
 ipv6 address 3001:2:e10a::2/64
 no shutdown
!
route-policy exabgp
  if source in (3001:2:e10a::10) then
    set local-preference 4294967295
  endif
  pass
end-policy
!
router ospf 1
 area 0
  interface Loopback0
  !
  interface GigabitEthernet0/0/0/0
   cost 65000
  !
  interface GigabitEthernet0/0/0/1
   cost 65000
  !
 !
!
router ospfv3 1
 area 0
  interface Loopback0
  !
  interface GigabitEthernet0/0/0/0
   cost 65000
  !
  interface GigabitEthernet0/0/0/1
   cost 65000
  !
 !
!
router bgp 65000
 address-family ipv4 unicast
  network 2.2.2.2/32
 !
 address-family ipv6 unicast
  network 3001:2:e10a::/64
 !
 session-group internal-peers
  remote-as 65000
  update-source Loopback0
 !
 neighbor-group internal-peers
  use session-group internal-peers
  address-family ipv6 unicast
  !
  address-family ipv4 unicast
  !
 !
 neighbor 3001:1::1
  use neighbor-group internal-peers
 !
 neighbor 3001:3::3
  use neighbor-group internal-peers
 !
 neighbor 3001:4::4
  use neighbor-group internal-peers
 !
 neighbor 3001:2:e10a::10
  description ExaBGP Peering
  remote-as 65010
  update-source GigabitEthernet0/0/0/8
  address-family ipv4 unicast
   route-policy exabgp in
   route-policy exabgp out
   next-hop-self
  !
  address-family ipv6 unicast
   route-policy exabgp in
   route-policy exabgp out
   next-hop-self
  !
 !
!
end
